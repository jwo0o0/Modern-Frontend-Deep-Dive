## 3.1 ë¦¬ì•¡íŠ¸ì˜ ëª¨ë“  í›… íŒŒí—¤ì¹˜ê¸°

### useState

> **í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ìƒíƒœë¥¼ ì •ì˜**í•˜ê³ , **ì´ ìƒíƒœë¥¼ ê´€ë¦¬**í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í›…

```jsx
import { useState } from "react";

const [state, setState] = useState(initialState);
```

- ì´ˆê¹ƒê°’ì„ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ undefined

ğŸ’¡Â **í´ë¡œì €**ë¥¼ ì´ìš©í•´Â `useState` ë‚´ë¶€ì˜ ëª¨ìŠµì„ êµ¬í˜„í•œ ì½”ë“œ

```jsx
const MyReact = (function () {
	const global = {}
	let index = 0

	function useState(initialState) {
		// ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì˜ states ë°°ì—´ì„ ì´ˆê¸°í™”
		if (!global.states) {
			global.states = []
		}

		// states ì •ë³´ë¥¼ ì¡°íšŒí•´ í˜„ì¬ ìƒíƒœê°’ì„ í™•ì¸í•˜ê³  ì´ˆê¹ƒê°’ ì„¤ì •
		const currentState = global.states[index] || initialState
		// statesì˜ ê°’ì„ ìœ„í•´ ì¡°íšŒí•œ í˜„ì¬ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸
		global.states[index] = currentState

		// ì¦‰ì‹œ ì‹¤í–‰ í•¨ìˆ˜ë¡œ setter
		const setState = (function () {
			// í˜„ì¬ indexë¥¼ í´ë¡œì €ë¡œ ê°€ë‘¬ë†”ì„œ ì´í›„ì—ë„ ë™ì¼í•œ indexì— ì ‘ê·¼ ê°€ëŠ¥
			let currentIndex = index
			return function (value) {
				global.states[currentIndex] = value
				// ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§
				// ...
			}
		})()

		// useStateë¥¼ ì“¸ ë•Œë§ˆë‹¤ indexë¥¼ í•˜ë‚˜ì”© ì¶”ê°€
		index = index + 1

		return [currentState, setState]
	}
}
```

- í´ë¡œì €ë¥¼ ì‚¬ìš©í•´ ì™¸ë¶€ì— í•´ë‹¹ ê°’ì„ ë…¸ì¶œì‹œí‚¤ì§€ ì•Šê³  ì˜¤ì§ ë¦¬ì•¡íŠ¸ì—ì„œë§Œ ì‚¬ìš©

ğŸ“ŒÂ **ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”**(lazy initialization)

```jsx
// ì¼ë°˜ì ì¸ ì‚¬ìš©
const [count, setCount] = useState(
  Number.parseInt(window.localStorage.getItem(cacheKey))
);
// ë¦¬ë Œë”ë§ì‹œì—ë„ ë™ì¼í•˜ê²Œ í•´ë‹¹ ê°’ì— ì ‘ê·¼í•´ì„œ ë‚­ë¹„ê°€ ë°œìƒ

// ê²Œìœ¼ë¥¸ ì´ˆê¸°í™”
const [count, setCount] = useState(() =>
  Number.parseInt(window.localStorage.getItem(cacheKey))
);
// ì´ˆê¹ƒê°’ì´ ì—†ë‹¤ë©´ -> í•¨ìˆ˜ ì‹¤í–‰
// ì´ˆê¹ƒê°’ì´ ìˆë‹¤ë©´ -> í•¨ìˆ˜ ì‹¤í–‰ì„ í•˜ì§€ ì•Šê³  ê¸°ì¡´ ê°’ì„ ì‚¬ìš©
```

- `useState`ì— ë³€ìˆ˜ ëŒ€ì‹  í•¨ìˆ˜ë¥¼ ë„˜ê¹€
- **ì´ˆê¹ƒê°’ì´ ë³µì¡í•˜ê±°ë‚˜ ë¬´ê±°ìš´ ì—°ì‚°ì„ í¬í•¨**í•˜ê³  ìˆì„ ë•Œ ì‚¬ìš©
  - `localStorage`, `sessionStorage` ì ‘ê·¼, map, filter, find ê°™ì€ ë°°ì—´ì— ëŒ€í•œ ì ‘ê·¼ ë“±
- ì´í›„ì— ë¦¬ë Œë”ë§ì´ ë°œìƒëœë‹¤ë©´ ì´ í•¨ìˆ˜ì˜ ì‹¤í–‰ì€ ë¬´ì‹œ

### useEffect

> ì• í”Œë¦¬ì¼€ì´ì…˜ ë‚´ **ì»´í¬ë„ŒíŠ¸ì˜ ì—¬ëŸ¬ ê°’ë“¤ì„ í™œìš©í•´ ë™ê¸°ì ìœ¼ë¡œ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ë§Œë“œëŠ” ë©”ì»¤ë‹ˆì¦˜**

```jsx
function Component() {
	// ...
	useEffect(() => {
		// do something
	}, [props, state])
	/ ...
}
```

- **ì²« ë²ˆì§¸ ì¸ìˆ˜**: _ì‹¤í–‰í•  ë¶€ìˆ˜ íš¨ê³¼ê°€ í¬í•¨ëœ í•¨ìˆ˜_, **ë‘ ë²ˆì§¸ ì¸ìˆ˜**: _ì˜ì¡´ì„± ë°°ì—´_
  â†’ ì˜ì¡´ì„± ë°°ì—´ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ì²«ë²ˆì§¸ ì¸ìˆ˜ì¸ ì½œë°±ì„ ì‹¤í–‰
- ë Œë”ë§í•  ë•Œë§ˆë‹¤ ì˜ì¡´ì„±ì— ìˆëŠ” ê°’ì„ ë³´ë©´ì„œ ì´ì „ê³¼ ë‹¤ë¥¸ê²Œ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´ ë¶€ìˆ˜ íš¨ê³¼ë¥¼ ì‹¤í–‰

ğŸ“ŒÂ **í´ë¦°ì—… í•¨ìˆ˜ì˜ ëª©ì **

> í´ë¦°ì—… í•¨ìˆ˜: `useEffect` ë‚´ë¶€ì—ì„œ ë°˜í™˜ë˜ëŠ” í•¨ìˆ˜

- í´ë¦°ì—… í•¨ìˆ˜ëŠ” ìƒˆë¡œìš´ ê°’ê³¼ í•¨ê»˜ ë Œë”ë§ëœ ë’¤ì— ì‹¤í–‰
  í•˜ì§€ë§Œ ë³€ê²½ëœ ê°’ì„ ì½ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ì „ ê°’ì„ ë³´ê³  ì‹¤í–‰
- `useEffect`ëŠ” ì½œë°±ì´ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ **ì´ì „ì˜ í´ë¦°ì—… í•¨ìˆ˜ê°€ ì¡´ì¬í•œë‹¤ë©´ í´ë¦°ì—… í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë’¤ ì½œë°±ì„ ì‹¤í–‰**

ğŸ“ŒÂ **ì˜ì¡´ì„± ë°°ì—´**

- **ì˜ì¡´ì„± ë°°ì—´ì´ ë¹ˆ ë°°ì—´**: ìµœì´ˆ ë Œë”ë§ ì§í›„ ì‹¤í–‰ëœ ë‹¤ìŒ ë” ì´ìƒ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
- **ì˜ì¡´ì„±ì— ê°’ X**: ë Œë”ë§ì´ ë°œìƒí•  ë•Œë§ˆë‹¤ ì‹¤í–‰

  ```jsx
  function Component() {
    console.log("ë Œë”ë§ë¨");
  }

  function Component() {
    useEffect(() => {
      console.log("ë Œë”ë§ë¨");
    });
  }
  ```

  - ì°¨ì´ì : `useEffect`ëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ ë³´ì¥, window ê°ì²´ì— ì ‘ê·¼ ê°€ëŠ¥
  - `useEffect`ëŠ” ë Œë”ë§ì˜ ë¶€ìˆ˜ íš¨ê³¼, ì¦‰ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì´ ì™„ë£Œëœ í›„ ì‹¤í–‰, ì§ì ‘ ì‹¤í–‰ì€ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ëŠ” ë„ì¤‘ì— ì‹¤í–‰ â†’ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì˜ ë°˜í™˜ì„ ì§€ì—°ì‹œí‚¬ ìˆ˜ ìˆìŒ

ğŸ“ŒÂ **`useEffect`ì˜ êµ¬í˜„**

```jsx
const MyReact = (function () {
  const global = {};
  let index = 0;

  function useEffect(callback, dependencies) {
    const hooks = global.hooks;

    let previousDependencies = hooks[index];

    // ë³€ê²½ëëŠ”ì§€ í™•ì¸
    let isDependenciesChanged = previousDependencies
      ? dependencies.some(
          (value, idx) => !Object.is(value, previousDependencies[idx])
        )
      : true;

    if (isDependenciesChanged) {
      // ë³€ê²½ì´ ì¼ì–´ë‚¬ë‹¤ë©´ ì½œë°± ì‹¤í–‰
      callback();
    }

    hooks[index] = dependencies; // í˜„ì¬ ì˜ì¡´ì„±ì„ í›…ì— ì €ì¥

    index++; // ë‹¤ìŒ í›…ì´ ì¼ì–´ë‚  ë•Œë¥¼ ëŒ€ë¹„í•´ index ì¶”ê°€
  }

  return { useEffect };
})();
```

- **Object.is**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì–•ì€ ë¹„êµë¥¼ ìˆ˜í–‰

ğŸš¨Â **`useEffect`ë¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì **

1. `eslint-disable-line react-hooks/exhaustive-deps` ì£¼ì„ì€ ìµœëŒ€í•œ ìì œ
   - `useEffect` ì¸ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê°’ ì¤‘ ì˜ì¡´ì„± ë°°ì—´ì— í¬í•¨ë¼ ìˆì§€ ì•Šì€ ê°’ì´ ìˆì„ ë•Œ ê²½ê³ ë¥¼ ë°œìƒ
     â‡’ ì»´í¬ë„ŒíŠ¸ì˜ state, propsì™€ ê°™ì€ **ì–´ë–¤ ê°’ì˜ ë³€ê²½ê³¼** `useEffect`ì˜ **ë¶€ìˆ˜ íš¨ê³¼ê°€ ë³„ê°œë¡œ ì‘ë™í•˜ê²Œ ë¨**
2. `useEffect`ì˜ **ì²« ë²ˆì§¸ ì¸ìˆ˜ì— í•¨ìˆ˜ëª…ì„ ë¶€ì—¬í•˜ë¼**

   ```jsx
   useEffect(
     function logActiveUser() {
       logging(user.id);
     },
     [user.id]
   );
   ```

   - `useEffect`ì˜ ëª©ì ì„ ëª…í™•íˆí•˜ê³  ì±…ì„ì„ ìµœì†Œí•œìœ¼ë¡œ ì¢íŒë‹¤

3. ê±°ëŒ€í•œ `useEffect`ë¥¼ ë§Œë“¤ì§€ ë§ˆë¼
4. ë¶ˆí•„ìš”í•œ ì™¸ë¶€ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì§€ ë§ˆë¼

<aside>
ğŸ’¡

**`useEffect`ì˜ ì½œë°± ì¸ìˆ˜ë¡œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ë°”ë¡œ ë„£ì„ ìˆ˜ ì—†ëŠ” ì´ìœ ?**

```jsx
useEffect(async () => {
  // ì—ëŸ¬ ë°œìƒ
  const response = await fetch("http://some.data.com");
  const result = await response.json();
  setData(ressult);
}, []);
```

`useEffect`ì—ì„œ ë¹„ë™ê¸°ë¡œ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ê²½ìš° **ê²½ìŸ ìƒíƒœê°€ ë°œìƒ**í•  ìˆ˜ ìˆìŒ
ë‚´ë¶€ì—ì„œ ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ ì„ ì–¸í•´ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ ê°€ëŠ¥
â†’ í•˜ì§€ë§Œ í´ë¦°ì—… í•¨ìˆ˜ì—ì„œ ì´ì „ ë¹„ë™ê¸° í•¨ìˆ˜ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ

</aside>

### useMemo

> **ë¹„ìš©ì´ í° ì—°ì‚°ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì €ì¥(ë©”ëª¨ì´ì œì´ì…˜)**í•´ ë‘ê³ , ì´ ê°’ì„ ë°˜í™˜í•˜ëŠ” í›…

```jsx
import { useMemo } from "react";

const memoizedValue = useMemo(() => expensiveComputation(a, b), [a, b]);
```

- **ì²« ë²ˆì§¸ ì¸ìˆ˜**: ì–´ë– í•œ ê°’ì„ ë°˜í™˜í•˜ëŠ” ìƒì„± í•¨ìˆ˜
- **ë‘ ë²ˆì§¸ ì¸ìˆ˜**: í•´ë‹¹ í•¨ìˆ˜ê°€ ì˜ì¡´í•˜ëŠ” ê°’ì˜ ë°°ì—´
  â†’ ì˜ì¡´ì„± ë°°ì—´ì˜ ê°’ì´ ë³€ê²½ë˜ì§€ ì•Šì•˜ìœ¼ë©´ í•¨ìˆ˜ë¥¼ ì¬ì‹¤í–‰í•˜ì§€ ì•Šê³  ì´ì „ ê°’ì„ ë°˜í™˜

**ğŸ“ŒÂ `useMemo`ë¥¼ ì‚¬ìš©í•œ ì»´í¬ë„ŒíŠ¸ ë©”ëª¨ì´ì œì´ì…˜**

```jsx
function ExpensiveCompnent({ value }) {
  useEffect(() => {
    console.log("rendering!");
  });
  return <span>{value + 1000}</span>;
}

function App() {
  const [value, setValue] = useState(10);
  const [, triggerRendering] = useState(false);

  // ì»´í¬ë„ŒíŠ¸ì˜ propsë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ ìì²´ë¥¼ ë©”ëª¨ì´ì œì´ì…˜
  const MemoizedComponent = useMemo(
    () => <ExpensiveComponent value={value} />,
    [value]
  );

  function handleChange(e) {
    setValue(Number(e.target.value));
  }
  function handleClick() {
    triggerRendering((prev) => !prev);
  }

  return (
    <>
      <input value={value} onChange={handleChange} />
      <button onClick={handleClick}>ë Œë”ë§ ë°œìƒ</button>
      {MemoizedComponent}
    </>
  );
}
```

- `triggerRendering`ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ì„ ê°•ì œë¡œ ë°œìƒì‹œì¼œë„ `MemoizedComponent`ëŠ” ë¦¬ë Œë”ë§ ë˜ì§€ ì•ŠìŒ

### useCallback

> **ì¸ìˆ˜ë¡œ ë„˜ê²¨ë°›ì€ ì½œë°± ìì²´ë¥¼ ê¸°ì–µí•´ íŠ¹ì • í•¨ìˆ˜ë¥¼ ìƒˆë¡œ ë§Œë“¤ì§€ ì•Šê³  ì¬ì‚¬ìš©**

```jsx
const ChildComponent = memo(({ aname, value, onChange }) => {
	useEffect(() => {
		console.log('rendering', name)
	})

	return (
		<>
			<h1>
				{name} {value ? 'ì¼œì§' : 'êº¼ì§'}
			</h1>
			<button onClick={onChange}>toggle</button>
		</>
	)
})

function App() {
	const [status1, setStatus1] = useState(false)
	const [status2, setStatus2] = useState(false)

	const toggle1 = useCallback(() => {
		setStatus2(!status1)
		}, [status1],
	)

	const toggle2 = useCallback(() => {
		setStatus2(!status2)
		}, [status2],
	)

	return (
		<>
			<ChildComponent name="1" value={status} onChange={toggle1} />
			<ChildComponent name="2" value={status} onChange={toggle2} />
		)
	}
```

- `toggle1`, `toggle2`ì— `useCallback`ì„ **ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë•Œ**:
  í´ë¦­í•˜ë©´ stateê°€ ë°”ë€Œë©´ì„œ App ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ë˜ê³  ë§¤ë²ˆ `onChange`ë¡œ ë„˜ê¸°ëŠ” í•¨ìˆ˜ê°€ ì¬ìƒì„± â†’ `ChildComponent` ë‘ê°œ ëª¨ë‘ ë¦¬ë Œë”ë§
- `useCallback`ì„ **ì‚¬ìš©í–ˆì„ ë•Œ**:
  ì˜ì¡´ì„± ë°°ì—´ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” í•œ í•¨ìˆ˜ë¥¼ ì¬ìƒì„±í•˜ì§€ ì•ŠìŒ

### useRef

> **ë°˜í™˜ê°’ ê°ì²´ ë‚´ë¶€ì— ìˆëŠ” currentë¡œ ê°’ì— ì ‘ê·¼ ë˜ëŠ” ë³€ê²½** > **ê°’ì´ ë³€í•˜ë”ë¼ë„ ë Œë”ë§ì„ ë°œìƒì‹œí‚¤ì§€ ì•ŠìŒ**

```jsx
// ì¼ë°˜ì ì¸ ì˜ˆì‹œ - DOMì— ì ‘ê·¼í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš”
function RefComponent() {
	const inputRef = useRef()

	// ë Œë”ë§ì´ ì‹¤í–‰ë˜ê¸° ì „
	console.log(inputRef.current) // undefined

	useEffect(() => {
		console.log(inputRef.current) // <input type="text"></input>
	}, [inputRef])

	return <input ref={inputRef} type="text />
}
```

- `useRef`ì˜ **ìµœì´ˆ ê¸°ë³¸ê°’**: DOMì´ ì•„ë‹ˆê³  `useRef()`ë¡œ ë„˜ê²¨ ë°›ì€ ì¸ìˆ˜
- ìœ ìš©í•œ ê²½ìš°: ë Œë”ë§ì„ ë°œìƒì‹œí‚¤ì§€ ì•Šê³  ì›í•˜ëŠ” ìƒíƒœê°’ì„ ì €ì¥

```jsx
// useStateì˜ ì´ì „ ê°’ì„ ì €ì¥í•˜ëŠ” usePrevious()
function usePrevious(value) {
  const ref = useRef();
  useEffect(() => {
    ref.current = value;
  }, [value]); // valueê°€ ë³€ê²½ë˜ë©´ ê·¸ ê°’ì„ refì— ì €ì¥
  return ref.current;
}

function SomeComponent() {
  const [counter, setCounter] = useState(0);
  const previousCounter = usePrevious(counter);

  function handleClick() {
    setCounter((prev) => prev + 1);
  }

  // 0, (undefined)
  // 1, 0
  // 2, 1
  return (
    <button onClick={handleClick}>
      {counter} {previousCounter}{" "}
    </button>
  );
}
```

### useContext

> **ìƒìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë§Œë“¤ì–´ì§„ Contextë¥¼ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤Œ**

<aside>
ğŸ’¡

**Contextë€?**
props drillingì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ ëª…ì‹œì ì¸ props ì „ë‹¬ ì—†ì´ë„ ì„ ì–¸í•œ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì—ì„œ ììœ ë¡­ê²Œ ì›í•˜ëŠ” ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ

</aside>

```jsx
const Context = (createContext < { hello: string }) | (undefined > undefined);

function ParentComponent() {
  return (
    <>
      <Context.Provider value={{ hello: "react" }}>
        <Context.Provider value={{ hello: "javascript" }}>
          <ChildComponent />
        </Context.Provider>
      </Context.Provider>
    </>
  );
}

function ChildComponent() {
  const value = useContext(Context);

  return <>{value ? value.hello : ""}</>; // javascript
}
```

- ì—¬ëŸ¬ ê°œì˜ Providerê°€ ìˆë‹¤ë©´ ê°€ì¥ ê°€ê¹Œìš´ ê°’ì„ ê°€ì ¸ì˜´
- ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤í–‰ë  ë•Œ ì½˜í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ
  â†’ `useContext` ë‚´ë¶€ì—ì„œ **í•´ë‹¹ ì½˜í…ìŠ¤íŠ¸ê°€ ì¡´ì¬í•˜ëŠ” í™˜ê²½ì¸ì§€ í™•ì¸**

```tsx
const MyContext = createContext<{ hello: string } | undefined>(undefined);

function ContextProvider({
  children,
  text,
}: PropsWithChildren<{ text: string }>) {
  return (
    <MyContext.Provider value={{ hello: text }}>{children}</MyContext.Provider>
  );
}

function useMyContext() {
  const context = useContext(MyContext);
  if (context === undefined) {
    throw new Error("useMyContextëŠ” ContextProvider ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©");
  }
  return context;
}

function ChildComponent() {
  const { hello } = useMyContext();
  return <>{hello}</>;
}
```

**ğŸš¨Â `useContext`ë¥¼ ì‚¬ìš©í•  ë•Œ ì£¼ì˜í•  ì **

- í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ë©´ ì»´í¬ë„ŒíŠ¸ ì¬í™œìš©ì´ ì–´ë ¤ì›Œì§
  â†’ Providerì— ì˜ì¡´ì„±ì„ ê°€ì§€ê³  ìˆìŒ
- ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ ëª¨ë“  ì½˜í…ìŠ¤íŠ¸ë¥¼ ìµœìƒìœ„ ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸ì— ë„£ìœ¼ë©´?
  â†’ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„
- ContextëŠ” ìƒíƒœë¥¼ ì£¼ì…í•´ì£¼ëŠ” APIì§€ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì•„ë‹˜(= useContextë¥¼ ì‚¬ìš©í•´ë„ ë Œë”ë§ì´ ìµœì í™”ë˜ì§€ ì•ŠìŒ)

### useReducer

> **`useState`ë³´ë‹¤ ë³µì¡í•œ ìƒíƒœê°’ì„ ë¯¸ë¦¬ ì •ì˜í•´ë†“ì€ ì‹œë‚˜ë¦¬ì˜¤ì— ë”°ë¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ**

- **ë°˜í™˜ê°’**: `useState`ì™€ ë™ì¼í•˜ê²Œ ê¸¸ì´ê°€ 2ì¸ ë°°ì—´
  - `state`: í˜„ì¬ useReducerê°€ ê°€ì§€ê³  ìˆëŠ” ê°’
  - `dispatcher`: stateë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜, actionì„ ë„˜ê²¨ì¤Œ
- **3ê°œì˜ ì¸ìˆ˜**ë¥¼ í•„ìš”ë¡œ í•¨
  - `reducer`: ê¸°ë³¸ actionì„ ì •ì˜í•˜ëŠ” í•¨ìˆ˜
  - `initialState`: useReducerì˜ ì´ˆê¹ƒê°’
  - `init`(í•„ìˆ˜ x): ì´ˆê¹ƒê°’ì„ ì§€ì—°í•´ì„œ ìƒì„±ì‹œí‚¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” í•¨ìˆ˜

```tsx
// useReducerê°€ ì‚¬ìš©í•  state
type State = {
  count: number;
};

// stateì˜ ë³€í™”ë¥¼ ë°œìƒì‹œí‚¬ actionì˜ íƒ€ì…ê³¼ ë„˜ê²¨ì¤„ ê°’ì„ ì •ì˜
type Action = { type: "up" | "down" | "reset"; payload?: State };

// ë¬´ê±°ìš´ ì—°ì‚°ì´ í¬í•¨ëœ ê²Œìœ¼ë¥¸ ì´ˆê¸°í™” í•¨ìˆ˜
function init(count: State): State {
  return count;
}

// ì´ˆê¹ƒê°’
const initialState: State = { count: 0 };

// stateì™€ actionì„ ê¸°ë°˜ìœ¼ë¡œ stateê°€ ì–´ë–»ê²Œ ë³€ê²½ë ì§€ ì •ì˜
function reducer(state: State, action: Action): State {
  switch (action.type) {
    case "up":
      return { count: state.count + 1 };
    case "down":
      return { count: state.count - 1 > 0 ? state.count - 1 : 0 };
    case "reset":
      return init(action.payload || { count: 0 });
    default:
      throw new Error(`unexpected action type ${action.type}`);
  }
}

export default function App() {
  const [state, dispatcher] = useReducer(reducer, initialState, init);

  function handleUpButtonClick() {
    dispatcher({ type: "up" });
  }
  function handleDownButtonClick() {
    dispatcher({ type: "down" });
  }
  function handleResetButtonClick() {
    dispatcher({ type: "reset", payload: { count: 1 } });
  }

  return (
    <div className="App">
      <h1>{state.count}</h1>
      <button onClick={handleUpButtonClick}>+</button>
      <button onClick={handleDownButtonClick}>+</button>
      <button onClick={handleResetButtonClick}>reset</button>
    </div>
  );
}
```

- ë³µì¡í•œ í˜•íƒœì˜ stateë¥¼ ì‚¬ì „ì— ì •ì˜ëœ dispatcherë¡œë§Œ ìˆ˜ì •í•  ìˆ˜ ìˆê²Œ ë§Œë“¤ì–´ì¤Œìœ¼ë¡œì¨ **state ê°’ì— ëŒ€í•œ ì ‘ê·¼ì€ ì»´í¬ë„ŒíŠ¸ì—ì„œë§Œ ê°€ëŠ¥**í•˜ê²Œ í•¨

### useImperativeHandle

<aside>
ğŸ’¡

**forwardRef**
: useRefì—ì„œ ë°˜í™˜í•œ ê°ì²´ë¡œ, ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ì˜ propsì¸ refì— ë„£ì–´ HTMLElementì— ì ‘ê·¼í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©

</aside>

```tsx
// refë¥¼ ì „ë‹¬í•˜ëŠ”ë° ìˆì–´ ì¼ê´€ì„±ì„ ì œê³µí•˜ê³  ì‚¬ìš©í•˜ëŠ” ìª½ì—ì„œë„ ì•ˆì •ì ìœ¼ë¡œ ë°›ì•„ì„œ ì‚¬ìš©
const ChildComponent = forwardRef((props, ref) => {
  useEffect(() => {
    console.log(ref);
  }, [ref]);
  return <div>ì•ˆë…•</div>;
});

function ParentComponent() {
  const inputRef = useRef();

  return (
    <>
      <input ref={inputRef} />
      <ChildComponent ref={inputRef} />
    </>
  );
}
```

> `useImperativeHandle`: **ë¶€ëª¨ì—ê²Œì„œ ë„˜ê²¨ë°›ì€ refë¥¼ ì›í•˜ëŠ” ëŒ€ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆëŠ” í›…**

```tsx
const Input = forwardRef((props, ref) => {
  useImperativeHandle(
    ref,
    () => ({
      alert: () => alert(props.value),
    }),
    [props.value]
  );
  return <input ref={ref} {...props} />;
});

function App() {
  const inputRef = useRef();
  const [text, setText] = useState("");

  function handleClick() {
    inputRef.current.alert();
  }
  function handleChange(e) {
    setText(e.target.value);
  }

  return (
    <>
      <Input ref={inputRef} value={text} onChange={handleChange} />
      <button onClick={handleClick}>Focus</button>
    </>
  );
}
```

- ì „ë‹¬ë°›ì€ refì— ì¶”ê°€ì ì¸ ë™ì‘ì„ ì •ì˜
- ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ëŠ” ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒˆë¡­ê²Œ ì„¤ì •í•œ ê°ì²´ì˜ í‚¤ì™€ ê°’ì— ëŒ€í•´ì„œë„ ì ‘ê·¼

### useLayoutEffect

> **`useEffect`ì™€ ì‚¬ìš© í˜•íƒœê°€ ë™ì¼í•˜ì§€ë§Œ, ëª¨ë“  DOMì˜ ë³€ê²½ í›„ì— ë™ê¸°ì ìœ¼ë¡œ ë°œìƒ**

1. ë¦¬ì•¡íŠ¸ê°€ DOMì„ ì—…ë°ì´íŠ¸
2. `useLayoutEffect`ë¥¼ ì‹¤í–‰
3. ë¸Œë¼ìš°ì €ì— ë³€ê²½ì‚¬í•­ì„ ë°˜ì˜
4. `useEffect`ë¥¼ ì‹¤í–‰

- ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ëŠ” useLayoutEffectê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ
- DOMì€ ê³„ì‚°ëì§€ë§Œ ì´ê²ƒì´ í™”ë©´ì— ë°˜ì˜ë˜ê¸° ì „ì— í•˜ê³  ì‹¶ì€ ì‘ì—…ì´ ìˆì„ ë•Œ ì‚¬ìš©
  e.g. DOM ìš”ì†Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì• ë‹ˆë©”ì´ì…˜, ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì œì–´ ë“±

### useDebugValue

> **ë””ë²„ê¹…í•˜ê³  ì‹¶ì€ ì •ë³´ë¥¼ ì‚¬ìš©í•˜ë©´ ë¦¬ì•¡íŠ¸ ê°œë°œì ë„êµ¬ì—ì„œ ë³¼ ìˆ˜ ìˆìŒ**

```tsx
function useDate() {
  const date = new Date();
  useDebugValue(date, (date) => `í˜„ì¬ ì‹œê°„: ${date.toISOString()}`);
  return date;
}

export default function App() {
  const date = useDate();
  const [counter, setCounter] = useState(0);

  function handleClick() {
    setCounter((prev) => prev + 1);
  }
  return (
    <div className="App">
      <h1>
        {counter} {date.toISOString()}
      </h1>
      <button onClick={handleClick}>+</button>
    </div>
  );
}
```

- ì‚¬ìš©ì ì •ì˜ í›… ë‚´ë¶€ì˜ ë‚´ìš©ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆìŒ
- ë‘ë²ˆì§¸ ì¸ìˆ˜ë¡œ í¬ë§¤íŒ… í•¨ìˆ˜ë¥¼ ì „ë‹¬ - ê°’ì´ ë³€ê²½ëì„ ë•Œë§Œ í˜¸ì¶œë˜ì–´ í¬ë§¤íŒ…ëœ ê°’ì„ ë…¸ì¶œ

### í›…ì˜ ê·œì¹™

<aside>
ğŸ’¡

1. **ìµœìƒìœ„ì—ì„œë§Œ í›…ì„ í˜¸ì¶œ**í•´ì•¼ í•¨. ë°˜ë³µë¬¸ì´ë‚˜ ì¡°ê±´ë¬¸, ì¤‘ì²©ëœ í•¨ìˆ˜ ë‚´ì—ì„œ ì‹¤í–‰í•  ìˆ˜ ì—†ìŒ
   â‡’ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œë§ˆë‹¤ **í•­ìƒ ë™ì¼í•œ ìˆœì„œë¡œ í›…ì´ í˜¸ì¶œë˜ëŠ” ê²ƒì„ ë³´ì¥**
2. í›…ì„ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” ê²ƒì€ **ë¦¬ì•¡íŠ¸ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸** í˜¹ì€ **ì‚¬ìš©ì ì •ì˜ í›…** ë‘ê°€ì§€
</aside>

- í›…ì— ëŒ€í•œ ì •ë³´ ì €ì¥ - ë¦¬ì•¡íŠ¸ ì–´ë”˜ê°€ì— ìˆëŠ” indexì™€ ê°™ì€ í‚¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„
  â†’ ìˆœì„œì— ì•„ì£¼ í° ì˜í–¥ì„ ë°›ìŒ
