## 4.2 ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ì„ ìœ„í•œ ë¦¬ì•¡íŠ¸ API ì‚´í´ë³´ê¸°

- ë¦¬ì•¡íŠ¸: ë¦¬ì•¡íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì„œë²„ì—ì„œ ë Œë”ë§í•  ìˆ˜ ìˆëŠ” APIë„ ì œê³µ
  https://react.dev/reference/react-dom/server

### renderToString

> ì¸ìˆ˜ë¡œ ë„˜ê²¨ë°›ì€ **ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•´ HTML ë¬¸ìì—´ë¡œ ë°˜í™˜**

```tsx
import ReactDOMServer from 'react-dom/server'

function ChildComponent({ fruits }: {fruits:Array<string> }) {
	useEffect(() => {
		console.log(fruits)
	}, [fruits])

	function handleClick() {
		console.log('hello')
	}
	return (
		<ul>
			{fruits.map((fruit) => (
				<li key={fruit} onClick={handleClick}>{fruit}</li>
			))}
		</ul>
	)
}

function SampleComponent() {
	return (
		<>
			<div>hello</div>
			<ChildrenComponent fruits={['apple', 'banana', 'peach']} />
		</>
	)
}

const result = ReactDOMServer.renderToString(
	React.createElement('div', { id: 'root' }, <SampleComponent />),)

<div id="root" data-reactroot="">
	<div>hello</div>
	<ul>
		<li>apple</li>
		<li>banana</li>
		<li>peach</li>
	</ul>
</div>
```

- useEffect ê°™ì€ í›…ê³¼ handleClick ê°™ì€ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ëŠ” ê²°ê³¼ë¬¼ì— í¬í•¨ë˜ì§€ ì•ŠìŒ
- ì¸ìˆ˜ë¡œ ì£¼ì–´ì§„ ì»´í¬ë„ŒíŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ **ë¸Œë¼ìš°ì €ê°€ ë¹ ë¥´ê²Œ ë Œë”ë§í•  ìˆ˜ ìˆëŠ” HTMLì„ ì œê³µí•˜ëŠ” ê²ƒì´ ëª©ì **
- HTMLì„ ì„œë²„ì—ì„œ ì œê³µí•˜ë¯€ë¡œ ì´ˆê¸° ë Œë”ë§ì— ë›°ì–´ë‚œ ì„±ëŠ¥
- ê²€ìƒ‰ ì—”ì§„ì— í•„ìš”í•œ ë©”íƒ€ ì •ë³´ë„ ë¯¸ë¦¬ ì¤€ë¹„í•´ ì œê³µ ê°€ëŠ¥

### renderToStaticMarkup

> ë¦¬ì•¡íŠ¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ HTML ë¬¸ìì—´ì„ ë§Œë“¤ì§€ë§Œ, ë£¨íŠ¸ ìš”ì†Œì— ì¶”ê°€í•œ `data-reactroot`ì™€ ê°™ì´ **ë¦¬ì•¡íŠ¸ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ì¶”ê°€ì ì¸ DOM ì†ì„±ì„ ë§Œë“¤ì§€ ì•ŠìŒ**

```tsx
const result = ReactDOMServer.RenderToStaticMarkup(
	React.createElement('div', { id: 'root' }, <SampleComponent />),)

<div id="root">
	<div>hello</div>
	<ul>
		<li>apple</li>
		<li>banana</li>
		<li>peach</li>
	</ul>
</div>
```

- ì™„ì „íˆ ìˆœìˆ˜í•œ HTML ë¬¸ìì—´ì„ ë°˜í™˜
- useEffectì™€ ê°™ì€ ë¸Œë¼ìš°ì € APIë¥¼ ì ˆëŒ€ë¡œ ì‹¤í–‰í•  ìˆ˜ ì—†ìŒ
  â†’ ë¦¬ì•¡íŠ¸ì˜ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆê°€ í•„ìš” ì—†ëŠ” ì •ì ì¸ ë‚´ìš©ë§Œ í•„ìš”í•œ ê²½ìš° ìœ ìš©

### renderToNodeStream

> `renderToString`, `renderToStaticMarkup`ì€ ë¸Œë¼ìš°ì €ì—ì„œë„ ì‹¤í–‰í•  ìˆ˜ëŠ” ìˆì§€ë§Œ `renderToNodeStream`ì€ **ë¸Œë¼ìš°ì €ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥**í•˜ë‹¤

- ì™„ì „íˆ Node.js í™˜ê²½ì— ì˜ì¡´í•´ì„œ ì‹¤í–‰
- **ê²°ê³¼ë¬¼**ì€ stringì¸ ë¬¸ìì—´ì´ ì•„ë‹ˆë¼ Node.jsì˜ `ReadableStream`(utf-8ë¡œ ì¸ì½”ë”©ëœ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì„œë²„ í™˜ê²½ì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ)
  `ReadableStream` ìì²´ëŠ” ë¸Œë¼ìš°ì €ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ë§Œë“œëŠ” ê³¼ì •ì´ ë¸Œë¼ìš°ì €ì—ì„œ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì¶”ê°€ì ì¸ ì²˜ë¦¬ê°€ í•„ìš”
  - ìŠ¤íŠ¸ë¦¼: í° ë°ì´í„°ë¥¼ ë‹¤ë£° ë•Œ ë°ì´í„°ë¥¼ ì²­í¬ë¡œ ë¶„í• í•´ ì¡°ê¸ˆì”© ê°€ì ¸ì˜¤ëŠ” ë°©ì‹
- **í° í¬ê¸°ì˜ HTML ë°ì´í„°ë¥¼ ì²­í¬ ë‹¨ìœ„ë¡œ ë¶„ë¦¬í•´ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬**í•  ìˆ˜ ìˆìŒ

### renderToStaticNodeStream

> `renderToNodeStream`ê³¼ ì œê³µí•˜ëŠ” ê²°ê³¼ë¬¼ì€ ë™ì¼í•˜ë‚˜, ë¦¬ì•¡íŠ¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ì— í•„ìš”í•œ ë¦¬ì•¡íŠ¸ ì†ì„±ì€ ì œê³µë˜ì§€ ì•ŠìŒ

- **hydrate**ë¥¼ í•  í•„ìš”ê°€ ì—†ëŠ” ìˆœìˆ˜ HTML ê²°ê³¼ë¬¼ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©

<aside>
ğŸ’¡

**hydrate**
: ìƒì„±ëœ HTML ì½˜í…ì¸ ì— ìë°”ìŠ¤í¬ë¦½íŠ¸ í•¸ë“¤ëŸ¬ë‚˜ ì´ë²¤íŠ¸ë¥¼ ë¶™ì´ëŠ” ì—­í• 

</aside>

**ğŸ“ŒÂ ë¦¬ì•¡íŠ¸ì˜ `render`ê³¼ `hydrate`**

```tsx
import * as ReactDOM from "react-dom";
import App from "./App";

const rootElement = document.getElementById("root");
ReactDOM.render(<App />, rootElement);
```

- `render`: í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì™€ HTMLì˜ ìš”ì†Œë¥¼ ì¸ìˆ˜ë¡œ ë°›ì•„ **HTMLì˜ ìš”ì†Œì— í•´ë‹¹í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§**í•˜ê³ , **ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ë¶™ì´ëŠ” ì‘ì—…**ì„ ìˆ˜í–‰

```tsx
import * as ReactDOM from "react-dom";
import App from "./App";

// ì„œë²„ì—ì„œ ë Œë”ë§ëœ HTMLì˜ íŠ¹ì • ìœ„ì¹˜
const element = document.getElementById(containerId);
ReactDOM.hydrate(<App />, element);
```

- `hydrate`: ì´ë¯¸ ë Œë”ë§ëœ HTML ìˆë‹¤ëŠ” ê°€ì •í•˜ì— ì‘ì—…ì´ ìˆ˜í–‰, ì´ **HTMLì„ ê¸°ì¤€ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ë¶™ì´ëŠ” ì‘ì—…ë§Œ ì‹¤í–‰**
- hydrateë¡œ ë„˜ê²¨ì£¼ëŠ” ë‘ë²ˆì§¸ ì¸ìˆ˜ì—ëŠ” `renderToString` ë“±ìœ¼ë¡œ ë Œë”ë§ëœ ì •ì ì¸ HTML ì •ë³´ê°€ ë§Œë“œì‹œ ë‹´ê²¨ìˆì–´ì•¼ í•¨
